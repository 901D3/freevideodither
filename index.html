<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Free Video Dithering</title>
    
    <meta charset="UTF-8">
    <!-- HTML Meta Tags -->
    <title>Free Video Dithering</title>
    <meta name="description" content="A tool for dither video instead of image">

    <!-- Facebook Meta Tags -->
    <meta property="og:url" content="https://freevideodither.glitch.me">
    <meta property="og:type" content="website">
    <meta property="og:title" content="Free Video Dithering">
    <meta property="og:description" content="A tool for dither video instead of image">
    <meta property="og:image" content="https://cdn.glitch.global/d8d2c659-a577-47c5-9a67-a6ea18704dba/banner.png?v=1729867894374">

    <!-- Twitter Meta Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta property="twitter:domain" content="freevideodither.glitch.me">
    <meta property="twitter:url" content="https://freevideodither.glitch.me">
    <meta name="twitter:title" content="Free Video Dithering">
    <meta name="twitter:description" content="A tool for dither video instead of image">
    <meta name="twitter:image" content="https://cdn.glitch.global/d8d2c659-a577-47c5-9a67-a6ea18704dba/banner.png?v=1729867894374">

    <link rel="stylesheet" href="https://901d3.glitch.me/styles/style.css">
    <link rel="stylesheet" href="style.css">
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/@fontsource/unifont@5.1.0/index.min.css"
     >
  </head>
  <body>
    <h1 class="glowfire" style="font-size: 175px">Free Video Dithering</h1>
    <br>
    <br>
    <h2>A tool for dither video instead of image</h2>
    <br>
    <br>
    <div style="width: 1500px; overflow: visible" id="docs">
      <p>
        This is a website for dithering videos, you can change dithering methods
        and some more settings(greyed dithering methods means it isnt avalable)
        <br>
        <br>
        For your privacy, this site will automatically delete the uploaded file
        after you reload or exit the page as it just a temporary file
        <br>
        <br>
        some question you may ask:
        <br>
        <br>
        Why did you make this site?
        <br>
        <br>
        Well its bc i want to dither video in Davinci Resolve so i go online and
        find some fuse plugins but the plugin by Akascape is the only dither
        plugin that is available for dr and it cost money so i make this
        <br>
        <br>
        Why this is called freevideodithering instead of video dithering? is
        there a paid one?
        <br>
        <br>
        I call it freevideodithering bc it was free, there is no paid as i want
        this to be free and everyone can use it
        <br>
        <br>
        Note:
        <br>
        <br>
        This tool does not dither based on the color palletes, instead it get the
        <br>
        <br>
        pixel infomation in the frame of video so you dont have to make you own color palletes
        <br>
        <br>
      </p>
      <h2>Features</h2>
      <br>
      <p>
        More dithering methods(still making some more)
        <br>
        Change canvas size
        <br>
        Customizable js codes
        <br>
        and lastly
        <br>
        <b>Record it into a video</b><span>(for rendering)</span>
      </p>
    </div>
    <br>
    <hr>
    <br>
    <div id="uploadFiles">
      <h2>Upload video files</h2>
      <br>
      <input
        type="file"
        id="videoInput"
        accept="video/mp4, video/x-msvideo, video/mpeg, video/ogg, video/webm, video/3gp, video/3gp2"
       >
      <br>
      <br>
      <h3>I recommend main or high h264 or h265 video for smoother playback, other codec may lags</h3>
    </div>
    <br>
    <br>
    <div class="controls">
      <div class="videoControls">
        <h2>Video size</h2>
        <br>
        <label for="videoWidth">Width:</label>
        <input type="number" id="videoWidth" placeholder="1280" value="1280">
        <br><br>
        <label for="videoHeight">Height:</label>
        <input type="number" id="videoHeight" placeholder="720" value="720">
        <br><br>
        <button onclick="changeVideoSize()">Change video size</button>
        <br>
        <br>
        <br>
        <button onclick="togglePlayPause()">Play/Pause</button>
        <br>
        <br>
        <br>
        <div>
          <label for="speedInput">Playback Speed:</label>
          <input
            type="number"
            id="speedInput"
            value="1"
            oninput="setPlaybackSpeed()"
           >
        </div>
        <br>
        <br>
        <br>
        <div>
          <label for="volumeSlider">Volume:</label>
          <input
            type="range"
            id="volumeSlider"
            value="100"
            step="0.001"
            min="0"
            oninput="updateVolumeFromSlider()"
            style="width: 200px;"
           >
          <input
            type="number"
            id="volumeInput"
            value="100"
            step="0.001"
            min="0"
            oninput="updateVolumeFromInput()"
            style="width: 200px"
           >
          <span style="font-family: UbuntuBold; font-size: 30px; font-weight: 700">%</span>
        </div>
      </div>
      <div class="canvasControls">
        <h2>Dithering method</h2>
        <br>
        <select id="ditherMethod" onchange="updateDitheringMethod(); onDitherChange()">
          <option value="none" selected="selected">None</option>
          <optgroup label="Grayscale">
            <option value="bayer2x2">Bayer 2x2</option>
            <option value="bayer4x4">Bayer 4x4</option>
            <option value="bayer8x8">Bayer 8x8</option>
            <option value="bayer16x16">Bayer 16x16</option>
            <option value="bayer32x32">Bayer 32x32</option>
            <option value="bayer64x64">Bayer 64x64</option>
            <option value="bayer128x128">Bayer 128x128</option>
            <option value="arithmeticadd" disabled>Arithmetic Add</option>
            <option value="arithmeticaddconv" disabled>Arithmetic Add Convariant</option>
            <option value="arithmeticxor" disabled>Arithmetic Xor</option>
            <option value="arithmeticaddconv" disabled>Arithmetic Xor Convariant</option>
            <option value="floydsteinberg" disabled>Floyd-Steinberg</option>
            <option value="atkinson" disabled>Atkinson</option>
            <option value="stuckirgb" disabled>Stucki</option>
            <option value="sierra" disabled>Sierra</option>
            <option value="sierralite" disabled>Sierra Lite</option>
          </optgroup>
          <optgroup label="Colored">
            <option value="bayer2x2rgb">Bayer 2x2</option>
            <option value="bayer4x4rgb">Bayer 4x4</option>
            <option value="bayer8x8rgb">Bayer 8x8</option>
            <option value="bayer16x16rgb">Bayer 16x16</option>
            <option value="bayer32x32rgb">Bayer 32x32</option>
            <option value="bayer64x64rgb">Bayer 64x64</option>
            <option value="bayer128x128rgb">Bayer 128x128</option>
            <option value="arithmeticaddrgb">Arithmetic Add</option>
            <option value="arithmeticaddconvrgb">Arithmetic Add Convariant</option>
            <option value="arithmeticxorrgb">Arithmetic Xor</option>
            <option value="arithmeticxorconvrgb">Arithmetic Xor Convariant</option>
            <option value="floydsteinbergrgb">Floyd-Steinberg</option>
            <option value="atkinsonrgb">Atkinson</option>
            <option value="stuckirgb">Stucki</option>
            <option value="sierrargb">Sierra</option>
            <option value="sierralitergb">Sierra Lite</option>
            <option value="tworowsierrargb">Two-Row Sierra</option>
          </optgroup>
        </select>
        <br>
        <br>
        <span>You may need a beefy device if you want to apply larger dither</span>
        <br>
        <div id="lvls" style="display: none">
          <br>
          <label for="grLvlsInput">Blend/Levels: </label>
          <br>
          <input
            type="range"
            id="grLvlsRange"
            oninput="updateGrLvlsRange()"
            min="0"
            value="5"
            max="255"
            step="0.00000000001"
           >
          <input
            type="number"
            id="grLvlsInput"
            oninput="updateGrLvlsInput()"
            value="5"
           >
          <br>
          <p>To change slider max value, type sth &lt;= 1 or &gt;1
            <br>
            And to snap slider value, hold shift or double click drag
          </p>
        </div>
        <div id="rgbLvls" style="display: none">
          <br>
          <div id="rLvls">
            <label for="rLvlsInput">Red Blend/Levels: </label>
            <br>
            <input
              type="range"
              id="rLvlsRange"
              oninput="updateRedLvlsRange()"
              min="0"
              value="6"
              max="255"
              step="0.00000000001"
             >
            <input
              type="number"
              id="rLvlsInput"
              oninput="updateRedLvlsInput()"
              value="6"
             >
          </div>
          <div id="gLvls">
            <label for="gLvlsInput">Green Blend/Levels: </label>
            <br>
            <input
              type="range"
              id="gLvlsRange"
              oninput="updateGreenLvlsRange()"
              min="0"
              value="7"
              max="255"
              step="0.00000000001"
             >
            <input
              type="number"
              id="gLvlsInput"
              oninput="updateGreenLvlsInput()"
              value="7"
             >
          </div>
          <div id="bLvls">
            <label for="bLvlsInput">Blue Blend/Levels: </label>
            <br>
            <input
              type="range"
              id="bLvlsRange"
              oninput="updateBlueLvlsRange()"
              min="0"
              value="6"
              max="255"
              step="0.00000000001"
             >
            <input
              type="number"
              id="bLvlsInput"
              oninput="updateBlueLvlsInput()"
              value="6"
             >
          </div>
          <br>
          <p>To change slider max value, type sth &lt;= 1 or &gt;1
            <br>
            And to snap slider value, hold shift or double click drag
          </p>
        </div>
        <br>
        <div id="noiseSettings" style="display: none">
          <label for="noiseAmountInput">Noise amount:</label>
          <input
            type="number"
            id="noiseAmountInput"
            value="64"
            oninput="setNoiseAmount()"
           >
        </div>
        <div name="change canvas size">
          <h2>Canvas size</h2>
          <br>
          <label for="canvasWidth">Width:</label>
          <input
            type="number"
            id="canvasWidth"
            placeholder="1280"
            value="1280"
           >
          <br><br>
          <label for="canvasHeight">Height:</label>
          <input
            type="number"
            id="canvasHeight"
            placeholder="720"
            value="720"
           >
          <br>
          <br>
          <button onclick="changecanvasSize()">Change canvas size</button>
          <br>
          <br>
          <span>This can change the recorder resolution</span>
          <br>
          <span>but also dither <b>MORE</b></span>
          <br>
          <br>
          <button id="refreshButton" style="font-size: 20px">Refresh canvas</button
            ><span>[R]</span>
        </div>
      </div>
    </div>
    <br><br>
    <div class="previewContainer">
      <div class="mainVideo">
        <h2>Video</h2>
        <video id="video" width="720" height="405" controls loop onplay="processVideo()">
          Your browser does not support this tag
        </video>
      </div>
      <div class="mainCanvas">
        <h2>Preview canvas</h2>
        <canvas
          id="canvas"
          width="720"
          height="405"
          >Your browser does not support this tag</canvas>
      </div>
    </div>
    <br>
    <br>
    <div>
      <h2>Recorder</h2>
      <br>
      <button id="startRecording" type="button" onclick="startRecording()">
      Start recording
      </button>
      <button id="stopRecording" type="button" onclick="stopRecording()" disabled>
      Stop recording
      </button><span>[F1] [SHIFT + F1]</span>
      <br>
      <br>
      <span>Note: file size could be large because its harder to compress if there are complex pixel info</span>
    </div>
    <br>
    <!--<div>
      <h3>
        If you dont like these dithering method you can still make your own here
      </h3>
      <br>
      <label style="font-size: 25px">
        <input
          style="width: 25px; height: 25px"
          type="checkbox"
          id="creativeModeCheckbox"
       >
        Custom mode
      </label>
      <br>
      <br>
      <textarea
        id="scriptEditor"
        style="display: none"
        rows="50"
        cols="165"
        oninput="applyJsCode()"
      ></textarea>
      </div>
      -->
    <br>
    <div">
    <br>
    <label style="font-size: 25px">
    <input
      style="width: 25px; height: 25px"
      type="checkbox"
      id="mediaRecorderCkbx"
     >
    Custom MediaRecorder(edit before start record)
    </label>
    <br>
    <br>
    <textarea
      id="mediaRecorderScriptEditor"
      style="display: none"
      rows="50"
      cols="165"
      oninput="applyMRCode()"
      ></textarea>
    <br>
    </div>
    <br>
    <p>These are still very buggy</p>
    <br>
    </div>
    <div id="console">
<p style="font-family: Unifont;text-align: center; transform-origin:center; color: #00ff00;">
0------------------------------------------------------0
/                                                      /
\                                                      \
/          ██╗      ██████╗  ██████╗ ███████╗          /
\          ██║     ██╔═══██╗██╔════╝ ██╔════╝          \
/          ██║     ██║   ██║██║  ███╗███████╗          /
\          ██║     ██║   ██║██║   ██║╚════██║          \
/          ███████╗╚██████╔╝╚██████╔╝███████║          /
\          ╚══════╝ ╚═════╝  ╚═════╝ ╚══════╝          \
/                                                      /
\                                                      \
0------------------------------------------------------0
____________________________________________________________________________________________________________________________________________________________________________
||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||
</p>
</div>
    <h6>901D3's sites has no limit LOL</h6>
    <div>
      <script src="../js/init.js"></script>
      <script>
        function printLog(message) {
            const consoleElement = document.getElementById("console");
            const textNode = document.createTextNode(message + "\n");
            consoleElement.appendChild(textNode);
            consoleElement.scrollTop = consoleElement.scrollHeight;
        }
            
      </script>
      <script>
        window.onload = function () {
          const screenWidth = window.screen.width;
          const screenHeight = window.screen.height;
        
          const currentWidth = window.innerWidth;
          const currentHeight = window.innerHeight;
        
          printLog("screen resolution: " + screenWidth + "x" + screenHeight);
          printLog(
            "current resolution: " + currentWidth + "x" + currentHeight
          );
        };
      </script>
      <script>
        function handleVideoUpload(event) {
          videoFile = event.target.files[0];
          let url = URL.createObjectURL(videoFile);
          video.src = url;
          printLog(`Uploaded video url: ${url}`);
        }
        document
          .getElementById("videoInput")
          .addEventListener("change", function (event) {
            const file = event.target.files[0];
            if (file) {
              const videoURL = URL.createObjectURL(file);
              const videoElement = document.getElementById("video");
              videoElement.src = videoURL;
              videoElement.load();
              printLog(`Video src: ${videoURL}`);
            }
          });
      </script>
      <script>
        document
          .getElementById("refreshButton")
          .addEventListener("click", function () {
            refreshCanvas();
          });
        
        document.addEventListener("keydown", function (event) {
          var activeElement = document.activeElement.tagName.toLowerCase();
        
          if (
            event.code === "KeyR" &&
            activeElement !== "input" &&
            activeElement !== "textarea"
          ) {
            refreshCanvas();
          }
        });
        
        
        function refreshCanvas() {
          processVideo();
        }
      </script>
      <script>
        let recording = false;
            
        document.addEventListener("keydown", function(event) {
          if (event.key === "F1" && !event.shiftKey) {
            event.preventDefault();
            if (recording) {
              stopRecording();
            } else {
              startRecording();
            }
            recording = !recording;
          }
          else if (event.key === "F1" && event.shiftKey) {
            event.preventDefault();
            video.currentTime = 0;
            video.play();
            if (!recording) {
              startRecording();
            }
            video.addEventListener("ended", function() {
              video.pause();
              stopRecording();
              recording = !recording;
            }, { once: true });
          }
        });
        
      </script>
      <div>
        <script src="../js/sizing.js"></script>
        <script src="../js/videocontrols.js"></script>
        <script src="../js/levels.js"></script>
        <script src="../js/dither.js" id="ogScript" type="text/javascript"></script>
        <script src="../js/init2.js"></script>
        <script src="../js/process.js"></script>
        <script
          src="../js/recorder.js"
          id="ogMediaRecorderScript"
          type="text/javascript"
          ></script>
      </div>
      <script id="editableScript" type="application/json"></script>
      <script
        id="editableMediaRecorderScript"
        type="application/json"
        >
        //MediaRecorder init
        
        let canvasStream = canvas.captureStream(); //canvas capture speed in fps
        let chunks = [];
        
        const option = {
          mimeType: "video/mp4; codec=avc1.64001F",
          videoBitsPerSecond: 100000000, //media recorder bitrate
        };
        
        const mediaRecorder = new MediaRecorder(
          canvasStream,
          option
        );
        
        //Main
        
        mediaRecorder.ondataavailable = (e) => {
          chunks.push(e.data);
          printLog("chunks pushed");
        };
        
        mediaRecorder.onstop = () => {
          const blob = new Blob(chunks);
          const recordedVideoUrl = URL.createObjectURL(blob);
          const downloadLink = document.createElement("a");
          downloadLink.download = "video.mp4";
          downloadLink.href = recordedVideoUrl;
          printLog(`Download link: ${downloadLink}`);
          downloadLink.click();
          printLog("Saved as webm");
        };
      </script>
      <script name="recorder functions">    
        function startRecording() {
          mediaRecorder.start();
          startRec.setAttribute("disabled", "");
          stopRec.removeAttribute("disabled");
          printLog("MediaRecorder started");
        }
        
        function stopRecording() {
          mediaRecorder.stop();
          startRec.removeAttribute("disabled");
          stopRec.setAttribute("disabled", "");
          printLog("MediaRecorder stopped");
          chunks = [];
        }
            
      </script>
      <script>
        function onDitherChange() {
          const ditherDropdown = document.getElementById("ditherMethod");
          ditherMethod = ditherDropdown.value;
        }
      </script>
      <script>
        const observer = new MutationObserver((mutations) => {
          mutations.forEach((mutation) => {
            if (mutation.type === 'attributes' && mutation.attributeName === 'src') {
              setTimeout(processVideo, 3000);
            }
          });
        });
        
        if (video) {
          observer.observe(video, { attributes: true });
        }
        
      </script>
    </div>
    <script name="custom script" src="custom.js"></script>
    <hr>
  </body>
</html>